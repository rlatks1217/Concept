### 명령어 사이클
- 프로그램 속 명령어들을 일정한 주기를 반복하면서 실행하는데 이걸 명령어 사이클이라고 함
1. 인출 사이클 : 가장 먼저 CPU로 실행할 명령어를 가져오는 과정
- 특정 명령어는 메모리 접근이 추가적으로 필요한 경우 인출 사이클과 실행 사이클 사이에 **간접 사이클**이란 과정이 추가되어 실행되기도 함.
2. 실행 사이클 : 실행하는 과정
- 메모리 추가 접근이 필요한 상황 예시 : 간접 주소 지정 방식인 경우 유효주소를 계산하기 위해 추가적으로 메모리에 접근해야 함

## 인터럽트
- 정해진 실행 흐름을 끊어버리는 것을 말함
- 'CPU가 꼭 주목해야 할 때', 'CPU가 얼른 처리해야 할 다른 작업이 생겼을 때' 발생
### 1. 동기 인터럽트
- CPU가 예외적인 상황(0으로 나누거나 메모리에 접근했는데 데이터가 없을 때 등의 상황)을 만났을 때 발생함
- 종류에는 폴트, 트랩, 중단, 소프트웨어 인터럽트가 있음(있다 정도만 알고 넘어가기)

![](../../README_resources/Pasted%20image%2020240112072755.png)
### 2. 비동기 인터럽트(하드웨어 인터럽트)
- 입출력 장치에 의해 발생


![](../../README_resources/Pasted%20image%2020240112072815.png)

##### 하드웨어 인터럽트(왜 쓰는지가 중요)
- 알림과 같은 역할을 함(세탁기나 프린트 완료 알림을 떠올리면 됨) -> 입출력이 완료되면 CPU로 알림이 전달이 됨
- 입출력 장치는 CPU에 비해 느림 -> 인터럽트가 없다면 CPU는 주기적으로 완료 여부를 확인해야 함(비효율적)
- 입출력 작업 도중에도 효율적으로 명령어를 처리하기 위해 하드웨어 인터럽트를 사용
	-> 인터럽트가 있다면 입출력 작업 동안 다른 일을 할 수 있게 됨 

### 하드웨어 인터럽트의 처리 순서
- 사실 인터럽트의 종류를 막론하고 대부분의 인터럽트 처리 순서는 아래의 순서와 크게 다르지 않다.

1. 입출력장치는 CPU에 **인터럽트 요청 신호**를 보냄(CPU는 인터럽트를 받아들이는 핀이 있어서 요청이 들어왔는지 아닌지 알 수 있음)
2. CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트가 있는지 핀을 통해 확인
3. CPU는 인터럽트 요청을 확인하고 플래그 레지스터에 있는 인터럽트 플래그(인터럽트 비트라고도 함)를 통해서 현재 인터럽트를 받아들일 수 있는지 여부를 확인함
4. 인터럽트를 받아들일 수 있다면 CPU는 지금까지의 작업을 백업해둠(stack 영역에 백업)
5. CPU는 인터럽트 벡터를 참조하여 **인터럽트 서비스 루틴**을 실행함
6. 인터럽트 서비스 루틴 실행이 실행되고 나서 4번에서 백업해둔 작업을 복구하여 이어서 실행함

- 인터럽트 요청 신호 : 입출력 장치가 정상적인 실행 흐름에 끼어들겠다고 요청을 보내는 신호
	- CPU가 인터럽트 플래그를 보고 받아들일 수 있는 상태면 받아들이고 처리하게 됨(정전, 고장과 같은 일부 인터럽트는 인터럽트 플래그로 막을 수 없음 -> 긴급한 것들이니까)
	- 막을 수 있는 인터럽트 : maskable Interrupt
	- 막을 수 없는 인터럽트 : non maskable Interrupt
- 인터럽트 서비스 루틴 : 인터럽트가 발생했을 때의 처리 방법이 프로그래밍 되어 있는 프로그램
	Ex) 
		키보드가 인터럽트 요청을 보내면 ~해야 한다.
		마우스가 인터럽트 요청을 보내면 ~해야 한다.
		와 같은 식으로 적혀 있음
	- 프로그램이기 때문에 메모리에 저장되어 있음(프로그램은 명령어의 집합으로 이뤄져 있기 때문에 `~번 주소부터 ~번 주소까지`가 하나의 프로그램일 것)
	- 각 입출력 장치에 대한 인터럽트 서비스 루틴을 각각 가지고 있음

![](../../README_resources/Pasted%20image%2020240112103801.png)

- 인터럽트 백터 : 각각의 인터럽트를 구분하기 위한 정보
	- CPU는 이 인터럽트 벡터를 보고 몇 번째 주소부터 실행해야 될 지 판단함 . 즉, 어떤 인터럽트 서비스 루틴을 실행할 지 판단함
	- 인터럽트 벡터 테이블 : 메모리 내부에 인터럽트 벡터들을 표처럼 모아놓은 것을 말함
	- 보통 인터럽트 신호를 보낼 때 인터럽트 벡터도 데이터 버스를 통해 같이 보냄

![](../../README_resources/Pasted%20image%2020240112103837.png)

즉, 명령어 사이클에서 인터럽트가 발생하여 받아들일 수 있는 경우라면 실행 사이클과 인출 사이클 사이에 인터럽트 사이클이 추가되어 동작하게 될 것
