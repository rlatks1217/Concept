### 뮤텍스 락
- 탈의실 문의 자물쇠와 같음 -> 자물쇠가 걸려 있다 싶으면 사람이 있겠거니 하고 기다리며, 그렇지 않은 경우엔 탈의실에 들어가게 됨
- 전역변수 하나, 함수 두 개로 뮤텍스 락의 단순한 형태를 구현해볼 수 있음(아래는 단순한 구현 예제이므로 변수, 함수의 이름도 임의로 정해준 것임)
Ex)
- 자물쇠 역할 : 공유하는 전역변수 lock
- 임계 구역을 잠그는 역할 : acquire 함수
- 임계 구역의 잠금을 해제하는 역할 : release 함수

03:41

**;** -> 무한 반복하라는 C언어 문법
true 잠김 / false 잠금해제

acquire 함수
- 프로세스가 임계 구역에 진입하기 전에 호출
- 임계 구역이 잠겨 있다면
	- 임계 구역이 열릴 때까지(lock이 false가 될 때까지) 임계 구역을 무한 반복 확인
- 임계 구역이 열려 있다면
	- 임계 구역을 잠그기(lock을 true로 바꾸기) -> 임계 구역 진입

release 함수
- 임계 구역에서의 작업이 끝나고 호출
- 현재 잠긴 임계 구역을 열기(lock을 false로 바꾸기) -> 임계 구역 빠져나옴

동작 순서

06:20

### 세마포
- 뮤텍스 락의 경우는 공유 자원이 하나만 있을 경우를 가정하고 만든 기법(세마포의 종류 중 이진 세마포가 이와 비슷함)
- 좀 더 일반화된 방식의 동기화 도구
- 공유 자원이 여러 개 있는 경우에도 적용 가능
- 프로세스들이 임계 구역 앞에서 멈춤 신호를 받으면 잠시 기다림
- 프로세스들이 임계 구역 앞에서 가도 좋다는 신호를 받으면 임계 구역 진입
- 전역변수 하나, 함수 두 개로 세마포의 단순한 형태를 구현해볼 수 있음(아래는 단순한 구현 예제이므로 변수, 함수의 이름도 임의로 정해준 것임)
Ex)
- 사용 가능한 공유자원의 갯수를 나타내는 전역 변수
- 임계 구역에 들어가도 좋은지, 기다려야 하는지 알려주는 wait 함수
- 임계 구역 앞에서 기다리는 프로세스에게 가도 좋다고 신호를 주는 signal 함수

13:30

13:40

14:15

- 바쁜 대기(busy waiting) : 위에서 봤던 예시들은 while문 안에서 공유자원에 접근할 수 있는지 무한히 확인하고 있음 이를 바쁜 대기라고 함
-> CPU 사이클 낭비이기 때문에 좋지 않음

**해결 방법**
- 사용할 수 있는 자원이 없을 경우 while문과 같이 무한히 확인하는 게 아니라 그냥 대기 상태로 만듦(해당 프로세스의 PCB를 대기 큐에 삽입) -> 대기 상태 동안은 CPU 사이클이 필요없으므로(즉, 낭비가 없어지는 것임) 
- 사용할 수 있는 자원이 생겼을 경우 대기 큐의 프로세스를 준비 상태로 만듦(해당 프로세스의 PCB를 대기 큐에서 꺼내 준비 큐에 삽입)

위의 방법을 접목시킨다면 **↓**

18:30

### 세마포를 활용한 실행 순서 동기화

21:10

만일 P2가 먼저 실행된다고 하더라도 wait() 가 실행되므로 대기 상태가 될 것이고, 이어 P1이 signal()함수를 실행하게 됨 즉, 실제 작업 실행 시작은 무조건 P1이 더 먼저 하게 되는 것임 (시간 나면 찾아보고 싶은 언어의 세마포 찾아보기)

22:45

그래서 등장한 모니터라는 놈이 있음
### 모니터
- 개발자가 다루기 편리한 동기화 도구
- 상호 배제를 위한 동기화와 실행 순서 제어를 위한 동기화를 모두 제공함
#### 상호 배제를 위한 동기화
- 그림과 같이 모니터는 공유자원과 공유자원을 이용하기 위한 인터페이스를 묶어서 같이 관리함 -> 공유자원을 사용하고자 하는 쓰레드나 프로세스는 반드시 이 인터페이스를 통해서만 접근이 가능하도록 함
- 공유자원에 접근하고자 하는 프로세스를 (인터페이스를 위한) 큐에 삽입
- 큐에 삽입된 순서대로 (한 번에 하나의 프로세스만) 공유 자원을 이용(연산은 인터페이스에서 이루어짐)

23:30

#### 실행 순서 제어를 위한 동기화
- 조건 변수(condition variable) 이용
- 조건 변수 : 프로세스나 스레드의 실행 순서를 제어하기 위해 사용하는 특별한 변수

