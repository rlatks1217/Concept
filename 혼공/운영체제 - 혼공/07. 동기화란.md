동시다발적으로 실행되는 프로세스와 쓰레드들은 서로 협력하며 영향을 주고 받음
-> 이 과정에서 자원의 일관성을 보장해야 함 즉, 동기화를 고려해야 함
※ 편의상 이 강의에서는 프로세스와 쓰레드를 그냥 프로세스라고 통칭함(대부분의 전공서도 그러하다고 함)

### 동기화의 의미
- 큰 의미는 프로세스의 수행 시기를 맞추는 것을 의미
- 구체적으로는
	- **실행 순서 제어** : 프로세스를 올바른 순서대로 실행하기
	- **상호 배제** : 동시에 접근해서는 안 되는 자원에 하나의 프로세스만 접근하게 하기

### 실행 순서 제어를 위한 동기화(reader writer problem)
- Writer : Book.txt 파일에 값을 저장하는 프로세스
- Reader : Book.txt 파일에 저장된 값을 읽는 프로세스
이런 경우 두 프로세스는 동시에 실행되면 안 되고 실행 순서를 제어해줘야 함(저장한 다음 읽는 게 자연스러운 실행의 순서일 테니까)

### 상호 배제를 위한 동기화(Bank account problem)
- 공유 자원의 동시 사용을 피하기 위한 동기화
현재 계좌에 잔액 : 10만원
프로세스 A는 현재 잔액에 2만원을 추가하는 프로세스
프로세스 B는 현재 잔액에 5만원을 추가하는 프로세스
이런 경우 두 프로세스가 동시에 실행된다고 했을 때 동기화가 이뤄지지 않는다면 상대적으로 늦게 종료가 되는 프로세스의 결과물이 반영될 것임 -> 먼저 실행되는 프로세스가 종료되기 전까지는 다른 프로세스가 자원(잔액)을 읽어서는 안 됨

잘못된 예제

![](../../README_resources/Pasted%20image%2020240403065939.png)

올바른 실행 과정

![](../../README_resources/Pasted%20image%2020240403070013.png)

### 공유 자원과 임계 구역
- **공유 자원** : 여러 프로세스가 공유하는 자원
Ex) 전역변수, 파일, 입출력장치, 보조기억장치 등
- **임계 구역** : 동시에 실행하면 문제가 발생하는 자원에 접근하는 코드 영역
Ex) 앞선 예시에서 언급한 잔액
	- 임계 구역에 진입하고자 한다면 진입한 프로세스 이외에는 대기해야 함

![](../../README_resources/Pasted%20image%2020240403063821.png)

- 여러 프로세스들이 임계 구역에 동시에 접근하면 자원의 일관성이 깨질 수 있음
	-> 이러한 문제 상황을 **경쟁상태**(race condition)이라고 함
- **자원의 일관성** : 공유 자원이 여러 프로세스에 의해 변화가 정확하고 예측 가능하며 안전하게 유지되는 것을 의미함(= 한 은행 계좌에 두 프로세스가 입금했을 때 해당 계좌에는 두 프로세스가 입금한 금액들이 더해진 잔액이 있어야 하는 것도 자원의 일관성과 관련된 예시임)

앞선 강의에서 배웠듯이 고급 언어는 저급 언어로 변환되어 실행됨 
-> 고급 언어일 당시에는 1줄짜리 코드였을지라도 저급 언어로 변환 시 여러 줄의 코드가 될 수 있음 
-> 이 변환된 저급 언어를 여러 프로세스들이 실행하는 상황에서 한 프로세스가 코드를 전부 실행하지 않았는데 문맥교환이 발생한다면 경쟁상태 문제가 발생할 수 있는 것임

### 운영체제가 임계구역 문제를 해결하는 세 가지 원칙
(= 상호 배제를 위한 동기화를 위한 세 가지 원칙)
1. **상호 배제(mutual exclusion)** : 한 프로세스가 임계 구역에 진입했다면 다른 프로세스는 들어갈 수 없음
2. **진행(progress)** : 임계 구역에 어떤 프로세스도 진입하지 않았다면 진입하고자 하는 프로세스는 들어갈 수 있어야 함
3. **유한 대기** : 한 프로세스가 임계 구역에 진입하려고 한다면 대기를 하더라도 언젠가는 임계 구역에 들어갈 수 있어야 함(= 무한정 대기해서는 안 된다는 의미)