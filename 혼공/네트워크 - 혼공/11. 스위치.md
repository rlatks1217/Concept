#### 허브의 충돌 문제
- CSMA/CD로 어느 정도 완화할 수 잇었지만 보다 근본적인 해결방법이 있음
	- 전달받은 신호를 수신지 호스트가 연결된 포트로만 내보내고, **전이중 모드**로 통신하면 됨
		-> 이를 위한 장비가 바로 **스위치**임

- 스위치는 어느 포트에 어떤 포트에 어떤 MAC 주소를 가지고 있는 호스트가 있는지 식별할 수 있음. 즉, 특정 호스트에게만 프레임을 전달할 수 있음

### 스위치의 주요 기능
- MAC 주소 학습 기능
	- 전달받은 신호를 원하는 포트로만 내보낼 수 있게 됨
	- 포트별로 콜리전 도메인이 나누어지면서 충돌 위험이 감소하게 됨
- 스위치의 VLAN 기능
	- 논리적으로 LAN을 분리하는 가상의 LAN, VLAN 구성이 가능

#### 스위치의 MAC 주소 학습 기능 (MAC address learning)
- 특정 포트와 해당 연결된 호스트의 MAC 주소와의 관계를 기억할 수 있음
- 원하는 호스트에만 프레임을 전달
- MAC 주소 테이블(MAC address table)
	- 스위치 포트와 연결될 호스트의 MAC 주소 간의 연관 관계를 나타내는 정보
	- 이 테이블을 통해 어떤 포트에 어떤 MAC 주소를 가진 호스트가 있는지 알 수 있음

![](../../README_resources/Pasted%20image%2020250615162701.png)

그렇다면 MAC 주소 테이블은 어떻게 생성 및 관리가 되는가?

![](../../README_resources/Pasted%20image%2020250615162738.png)

**※** 가정 : A -> C 방향으로 프레임을 전송하는 상황

- MAC 주소 학습은 **송신지 MAC 주소** 필드를 바탕으로 이루어짐([이더넷 프레임 참고](08.%20이더넷%20프레임))
	- 송신지(A)의 MAC 주소를 MAC 주소 테이블에 입력하면서 각 포트에 연결된 MAC 주소를 학습을 하게 되는 것
 -> 그림에서는 일단 A가 어느 포트에 연결되어 있는지는 알 수 있게 됨

##### 플러딩  : 허브처럼 송신지를 제외한 모든 포트로 프레임을 전송
- 맨 처음 프레임을 전송할 때는 어디가 C와 연결된 포트인지 모르기 때문에 플러딩을 하게 됨
- B, C, D가 모두 프레임을 수신하긴 하지만, 수신지가 아닌 B, D는 해당 프레임을 폐기하게 됨([NIC 참고](09.%20NIC와%20케이블.md))
- 호스트 C는 스위치로 응답 프레임을 스위치에 전송 -> 송신지(C)의 MAC 주소를 MAC 주소 테이블에 입력하면서 C의 MAC 주소를 학습하게 됨
- 이제 A와 C가 데이터를 주고 받을 때는 플러딩이 필요없음 (필터링과 포워딩만 이루어질 것)

##### 필터링 : 프레임을 송신지(C)의 포트를 제외하곤 프레임을 내보내지 않도록 하는 것
- 스위치는 A와 C에 연결된 포트가 어딘지 알았기 때문에(MAC 주소 테이블을 보면 알 수 있음) B와 D로는 프레임을 내보내지 않도록 C에 연결된 포트를 제외하고 나머지 포트로는 프레임을 내보내지 않게 됨

##### 포워딩 : 프레임을 송신지(C)와 연결된 포트로 내보내는 것

##### 에이징
- 만약 MAC 주소 테이블에 등록된 특정 포트에서 일정 시간 동안 프레임을 받지 못하면 해당 포트와 연결되어 있던 MAC 주소 데이터는 테이블에서 삭제함

### 브리지
- 스위치와 마찬가지로 데이터 링크 계층에 속한 장비
- 네트워크 영역을 구획하여 콜리전 도메인을 나누거나 네트워크를 확장하기 위한 장비
- 브리지도 앞서 언급된 스위치의 기능을 제공함
- 다만 단일 장비로서는 스위치의 기능이 더 낫기 때문에 브리지의 사용빈도는 줄고 있는 추세

### 스위치의 VLAN 기능
- VLAN(Virtual LAN) : 한 대의 스위치로 가상의 LAN을 만드는 방법
	- 한 대의 물리적 스위치를 여러 대의 스위치가 있는 것처럼 논리적인 단위로 LAN을 구획
	- 불필요한 트래픽(스위치의 플러딩)으로 인한 성능 저하 방지

![](../../README_resources/Pasted%20image%2020250615162828.png)

그림과 같이 같은 스위치를 공유하고 있다고 해서 플러딩에 의해 개발부와는 상관없는
총무부가 데이터를 받는 것은 낭비라는 것임

- VLAN은 사실상 서로 다른 LAN: 서로 다른 네트워크로 간주, 브로드캐스트 도메인이 달라짐

#### VLAN의 종류: 포트 기반 VLAN(정적 VLAN이라고도 부름)
- 스위치의 포트가 어떤 VLAN인지 결정하는 방식
- 특정 포트에 VLAN을 할당한 뒤, 해당 포트에 호스트를 연결하여 VLAN에 소속시킴
	- 호스트 A와 B는 VLAN2를 할당한 포트에 연결되어 있으므로 같은 LAN에 속한 셈임
	- 호스트 C는 VLAN에 속해 있으므로 호스트 A, B와는 다른 LAN에 속한 셈임

![](../../README_resources/Pasted%20image%2020250615162903.png)
#### MAC 기반 VLAN (동적 VLAN이라고도 부름)
- 사전에 설정된 MAC 주소에 따라 VLAN이 결정
- 송수신하는 프레임 속 MAC 주소가 호스트가 속할 VLAN을 결정하는 방식
![](../../README_resources/Pasted%20image%2020250615163004.png)