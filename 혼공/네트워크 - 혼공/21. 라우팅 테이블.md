### 데이터 링크 계층의 한계
- 물리 계층과 데이터 링크 계층만으로는 LAN을 넘어서 통신하기 어려운 두 가지 이유
##### 1. 다른 네트워크까지의 도달 경로를 파악하기 어려움
- 다른 네트워크까지의 경로를 파악하기 위해서는 네트워크 계층의 장비가 필요함
- 라우터 : 라우팅을 수행하는 대표적인 장비
- **라우팅 : 네트워크 간의 통신 시 최적의 경로를 결정하는 것을 의미**

![](../../README_resources/Pasted%20image%2020251012165400.png)
##### 2. 모든 네트워크에 속한 모든 호스트의 위치를 특정하기 어려움


### 라우터
- 네트워크 간 통신을 가능케 하는 네트워크 계층의 장비
- 네트워크 간 통신 과정에서 패킷은 여러 라우터를 거쳐서 다양한 경로로 이동할 수 있음
- 패킷은 여러 대의 라우터를 깡충깡충 거치듯 수신지까지 이동함
- 홉(hop) : 패킷이 출발지에서 목적지까지 이동할 때 거치는 하나의 중간 지점을 의미함. 이 때, 중간 지점의 예시로 라우터를 들 수 있음
- 이런 식으로 출발지에서 목적지까지 한 번에 이동하는 것이 아닌 여러 중간지점을 거쳐 통신하는 것을 **홉-바이-홉 라우팅**이라고 부름

![](../../README_resources/Pasted%20image%2020251012170525.png)

##### 라우팅 과정(홉 수(hop count) 확인)
Ex) google 접속 시 거치는 홉 수
- 윈도우 : tracert www.google.com
- 리눅스나 맥OS : traceroute www.google.com

![](../../README_resources/Pasted%20image%2020251012171032.png)

일부 수신지(or 중간 지점)의 경우 보안상의 이유로 해당 지점에 대한 정보를 표시하지 않게끔 설정할 수 있음 -> 이럴 경우, 실제로 거친 홉 정보 및 수와 명령어 입력 시 표시되는 정보 및 홉 수가 다를 수 있음

##### 그렇다면 라우터는 어떻게 라우팅을 수행할까?
- 라우팅 테이블을 이용해 라우팅을 수행함
- 라우팅 테이블은 자동으로 만들어지게 할 수도 있고(자동의 경우 라우팅 프로토콜을 이용함), 수동으로 만들 수도 있음 -> 만들어지는 방법과 프로토콜에 따라 라우팅 테이블을 분류할 수 있음

![](../../README_resources/Pasted%20image%2020251012171914.png)

##### 라우팅 테이블
- 특정 수신지까지 도달하기 위한 정보를 명시한 표와 같은 정보
- 라우터는 라우팅 테이블을 참고하여 수신지까지 도달 경로를 판단

**라우팅 테이블에 포함된 주요 정보들**
- 세부 정보의 경우 위에서 언급했듯이 만들어지는 방법과 프로토콜, 운영체제 종류 등에 따라 달라질 수 있음
1. 수신지 IP 주소와 서브넷 마스크
	- 최종적으로 패킷을 전달할 대상
2. 다음 홉(Next hop)
	- 최종 수신지까지 가기 위해 다음으로 거쳐야 할 호스트의 IP 주소나 인터페이스
	- `게이트웨이`라고 명시되기도 함
3. 네트워크 인터페이스
	- 패킷을 내보낼 통로
	- 인터페이스(NIC) 이름이 직접 명시되거나 인터페이스에 대응하는 IP 주소가 명시됨
4. 메트릭(Metric)
	- 해당 경로로 이동하는 데에 드는 비용
	- 라우팅 테이블의 여러 경로 중 메트릭이 낮은 경로를 선호

![](../../README_resources/Pasted%20image%2020251012172959.png)

'최종 수신지가 **192.168.2.0/24**인 패킷은 **eth0** 이라는 NIC를 통해 **192.168.2.1**(게이트웨이) 로 전송하라' 라는 의미가 됨. 이 때 드는 비용(메트릭)은 30이 되는 것임

##### 디폴트 라우트(default route)
- 라우팅 테이블에 최종 수신지에 대한 경로 정보가 없을 때 기본적으로 패킷을 내보낼 경로
- 모든 IP 주소를 의미하는 **0.0.0.0/0**으로 명시
Ex) 라우팅 테이블의 구성이 아래와 같고, 수신지 IP 주소가 1.2.3.4인 패킷을 받았다면 디폴트 라우트, eth2를 통해 192.168.0.1로 전송

![](../../README_resources/Pasted%20image%2020251012175555.png)

- 일반적으로 디폴트 라우트는 기본 게이트웨이 주소로 설정됨
- 기본 게이트웨이 : 네트워크 외부로 나가기 위한 첫 경로, 일반적으로 라우터/공유기의 주소
- 라우팅 테이블에 따로 경로가 등록되어 있지 않은 패킷들을 기본적으로 기본 게이트웨이(라우터)에게 전달

![](../../README_resources/Pasted%20image%2020251012175957.png)

##### 라우팅 테이블 확인
- route print (윈도우)
- metstat -rn (맥OS, 리눅스)

![](../../README_resources/Pasted%20image%2020251012181152.png)

- 라우터 접속해서 라우팅 테이블 확인 : show ip route

![](../../README_resources/Pasted%20image%2020251012181511.png)